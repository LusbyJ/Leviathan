using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class GameController : MonoBehaviour
{
    public SpawnEnemy[] spawnPoints;
	public TMP_Text roundText;
	public TMP_Text creditText;
	public float round;
	public float credits;
	
	private List<Enemy> currEnemies;
	
	// Start is called before the first frame update
    void Start()
    {
        round = 1;
		credits = 5;
		currEnemies = new List<Enemy>();
		StartCoroutine(round1());
    }

    // Update is called once per frame
    void Update()
    {
        roundText.text = "Round " + round;
		creditText.text = "Credits: " + credits;
		foreach(Enemy e in currEnemies){
			if(e.isDead()){
				currEnemies.Remove(e);
				Destroy(e);
			}
		}
    }
	
	private void updateRound(){ round++; }
	
	private void spawnEnemy(int spawn, int type){ 
		currEnemies.Add(spawnPoints[spawn].spawnEnemyType(spawn, type)); 
	}
	
	//37, 34, 36, 37, 35
	private IEnumerator round1(){
		currEnemies.Add(spawnPoints[0].spawnEnemyType(0, 0));
		yield return new WaitForSeconds(3);
		currEnemies.Add(spawnPoints[1].spawnEnemyType(1, 0));
		yield return new WaitForSeconds(3);
		currEnemies.Add(spawnPoints[2].spawnEnemyType(2, 0));
		yield return new WaitForSeconds(3);
		currEnemies.Add(spawnPoints[3].spawnEnemyType(3, 0));
		yield return new WaitForSeconds(3);
		currEnemies.Add(spawnPoints[4].spawnEnemyType(4, 0));
	}
}
